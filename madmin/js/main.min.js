window.UEDITOR_HOME_URL=document.getElementsByTagName("base")[0].href+"/plugin/ueditor/";require.config({paths:{css:"plugin/css.min",jquery:"js/jquery.min-1.11.1",unit:"js/unit.min",bootstrap:"plugin/bootstrap-3.3.5/js/bootstrap.min",colorpicker:"plugin/colorpicker-2.3.3/js/bootstrap-colorpicker.min",datetimepicker:"plugin/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN",dragsort:"plugin/dragsort-0.5.2/jquery.dragsort-0.5.2.min",dropload:"plugin/dropload-0.9.0/dropload.min",iconpicker:"plugin/iconpicker/js/fontawesome-iconpicker.min",layer:"plugin/layer-3.0.1/layer",mtree:"plugin/mtree-2.0/js/mtree.min",ueditor:"plugin/ueditor/ueditor.all.min",uploadifive:"plugin/uploadifive-1.1.2/js/do_uploadifive",holder:"plugin/holder.min",jqthumb:"plugin/jqthumb.min",form:"plugin/jquery.form.min",sortable:"plugin/jquery.sortable",template:"plugin/template"},shim:{bootstrap:{deps:["jquery","css!plugin/font-awesome-4.7.0/css/font-awesome.min.css"]},colorpicker:{deps:["jquery","bootstrap","css!plugin/colorpicker-2.3.3/css/bootstrap-colorpicker.min.css"]},datetimepicker:{deps:["jquery","bootstrap","plugin/datetimepicker/js/bootstrap-datetimepicker.min","css!plugin/datetimepicker/css/bootstrap-datetimepicker.min.css"]},dragsort:{deps:["jquery"]},dropload:{deps:["jquery","css!plugin/dropload-0.9.0/dropload.css"]},iconpicker:{deps:["jquery","bootstrap","css!plugin/iconpicker/css/fontawesome-iconpicker.min.css"]},layer:{deps:["jquery"]},mtree:{deps:["jquery","css!plugin/mtree-2.0/css/mtree.css"]},ueditor:{deps:["plugin/ueditor/third-party/zeroclipboard/ZeroClipboard.min.js","plugin/ueditor/ueditor.config.js"],exports:"UE",init:function(a){window.ZeroClipboard=a}},uploadifive:{deps:["jquery","plugin/uploadifive-1.1.2/js/jquery.uploadifive.me","jqthumb","holder","dragsort"]},holder:{deps:["jquery","jqthumb"]},template:{deps:["jquery"]}}});require(["jquery","bootstrap","mtree","layer","datetimepicker","form"],function(a){a('[data-name="mtreeSidebar"]').mtree({html:true,display:2,onClick:function(c,b){window.location.href=b}});a('[data-name="mtreeMainSidebar"]').mtree({html:true,display:2,onClick:function(c,b){window.location.href=b}});layer.config({path:"plugin/layer-3.0.1/",extend:"bootcss/style.min.css",skin:"layer-ext-bootcss",shade:0.75,shadeClose:true});a('input[data-name="datetimepicker"]').datetimepicker({language:"zh-CN",format:"yyyy-mm-dd hh:ii:ss",pickerPosition:"top-right",autoclose:true,todayBtn:true});a(document).on("click",'input[type="checkbox"][data-checkname]',function(){var c=a(this).data("checkname");var b=a(this).is(":checked");a('input[type="checkbox"][name^='+c+"]:enabled").prop("checked",b)});a(document).on("click",'input[type="checkbox"]',function(){var c=a(this).attr("name").replace(/\[.*\]/,"");var d=a('input[type="checkbox"][data-checkname="'+c+'"]:enabled');if(d.length==0){return}var e=a('input[type="checkbox"][name^="'+c+'"]:enabled:checked').length;var b=a('input[type="checkbox"][name^="'+c+'"]:enabled').length;if(e<b){d.prop("checked",false)}else{d.prop("checked",true)}});a(document).keydown(function(b){if(b.which==13){a('[data-name="searchbtn"]').click()}});a(document).on("click",'[data-name="del"]',function(){var c=a(this).data("tb");var e=a(this).data("id");var b=a(this).data("url");var d=a(this).data("primary");if(c==""||e==""||b==""){layer.msg("Âà†Èô§Â§±Ë¥•Ôº?",{icon:2,shade:0.75,shadeClose:true});return}layer.confirm("Âà†Èô§Êï∞ÊçÆÔº?",{icon:3,title:"Âà†Èô§"},function(){a.ajax({url:b,type:"post",data:{tbname:c,id:e,primary:d},success:function(f){if(parseInt(f)>0){layer.msg("Âà†Èô§ÊàêÂäüÔº?",{icon:1,time:1000,shade:0.75,shadeClose:true},function(){a('[data-name="searchbtn"]').click()})}else{layer.msg("Âà†Èô§Â§±Ë¥•Ôº?",{icon:2,shade:0.75,shadeClose:true})}}})})});a(document).on("click",'[data-name="batchDel"]',function(){var d=a(this).data("tb");var c=a(this).data("url");var e=a(this).data("primary");var b=(a(this).data("checkname"))?a(this).data("checkname"):"id";var f=a('input[type="checkbox"][name^='+b+"]:enabled:checked");var g="";f.each(function(){g+=a(this).val()+","});g=g.substring(0,g.length-1);if(g.length==0){layer.msg("Ê≤°ÊúâÊï∞ÊçÆÔº?",{icon:4,shade:0.75,shadeClose:true});return}layer.confirm("Âà†Èô§Êï∞ÊçÆÔº?",{icon:3,title:"ÊâπÈáèÂà†Èô§"},function(){a.ajax({url:c,type:"post",data:{tbname:d,id:g,primary:e},success:function(h){if(parseInt(h)>0){layer.msg("Âà†Èô§ÊàêÂäüÔº?",{icon:1,time:1000,shade:0.75,shadeClose:true},function(){a('[data-name="searchbtn"]').click();a('input[type="checkbox"][name="checkAll"][data-checkname="'+b+'"]').prop("checked",false)})}else{layer.msg("Âà†Èô§Â§±Ë¥•Ôº?",{icon:2,shade:0.75,shadeClose:true})}}})})});a('[data-name="sidebar_hidden"]').on("click",function(){a('[data-name="sidebar"]').toggleClass("sidebar_hidden")});if(a('[data-form="ajaxForm"]').length>0){a('[data-form="ajaxForm"]').ajaxForm({type:"post",dataType:"json",success:function(d,b){var f;if(d.msg){f=d.msg}else{switch(d.icon){case 1:f="Êìç‰ΩúÊàêÂäüÔº?";break;case 2:f="Êìç‰ΩúÂ§±Ë¥•Ôº?";break;default:f="ÊèêÁ§∫ÔºÅÔºÅÔº?";break}}var c=-1;if(d.icon){c=d.icon}var e=(d.time)?d.time:1000;layer.msg(f,{icon:c,time:e,shade:0.75,shadeClose:true},function(){if(d.url){location.href=d.url}})}})}});